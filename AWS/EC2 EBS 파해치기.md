## 🔍 EC2 란?


EC2란 Amazon Elastic Compute Cloud의 줄임말으로서, AWS에서 제공하는 클라우드 컴퓨팅이다. AWS에서 컴퓨터를 대여해주는 서비스이다. 초기 구입비, 세팅비가 전혀 없으며, 그냥 사용한 만큼 비용을 지불하면된다. 또한, EC2는 복잡한 공유기 세팅없이 인터넷을 통해서 자유롭게 접속이 가능하며, 이미지(AMI) 기능도 사용할 수 있다. 이미지(AMI)는 OS의 상태를 그대로 저장하는 기능으로, 윈도우 백업 설정과 같이 새로운 컴퓨터를 만들시에 이미지에 저장된 상태와 똑같은 컴퓨터를 빠르게 생성할 수 있는 것이다.

일반적인 서버의 경우, 컴퓨팅(CPU/RAM), 하드디스크, 랜카드로 나눌 수 있다. 이를 EC2에 대입해 본다면, 다음과 같이 표현 할 수 있다.

- 컴퓨팅 → **인스턴스**
- 하드디스크 → **EBS**
- 랜카드 → **ENI**
<br></br>
<br></br>
## 🔍 **EBS (Elastic Block Store)**


앞서 학습하였던, 인스턴스가 연산에 관한 (CPU, 메모르 등) 처리를 한다고 하면, **데이터를 저장**하는 역할(SSD, HDD)은 바로 EBS가 한다. 즉, 클라우드에서 사용하는 **가상 하드디스크(HDD)**로 이해하면 된다. EBS는 AWS 클라우드의 Amzom EC2 인스턴스에 사용할 **영구 블록 스토리지 볼륨**을 제공한다. 그리고 단 몇분 내에 사용량을 많게 또는 적게 확장할 수 있으며, 프로비저닝(빌리는 행위)한 부분에 대해서만 저렴한 비용을 지불 할 수 있다.
<br></br>
### ✅ **EBS ↔ EC2 연결 특징**

EBS의 가장 큰 특징은 **EC2 인스턴스가 종료되어도 별개로 작동**하여 유지가 가능하다는 점이다. 보통 컴퓨터 본체가 꺼지면 하드도 꺼져 당연히 이용을 못 하겠지만 **EBS는 EC2와 네트워크로 별개로 연결된 서비스** 이기 때문에 가능한 것이다. 그래서 만일 잠시 인스턴스의 처리 기능이 필요하지 않고 저장 장치 기능만 필요할때는, 인스턴스를 정지시켜도 EBS는 독립적으로 살아있기 때문에 스토리지 기능만 이용하는데 인스턴스의 추가 요금을 내지 않아도 된다.

이런식으로 컴퓨팅 로직을 구성하면 몇가지 장점이 있는데, 집 컴퓨터 같은 경우 CPU를 i9으로 업그레이드 한다고 하면 컴퓨터를 끄고 본체를 뜯어서 교체해줘야 하지만, **네트워크로 연결된(묶여있는) 인스턴스와 EBS**는 단순히 인스턴스만 다른걸로 EBS와 재연결만 시키면 되기 때문이다. 

또 다른 특징으로는 인스턴스 입장에서도 여러가지 EBS를 붙일 수 있다는 점이다. 하나의 컴퓨터에 HDD, SSD를 여러개 부착할수 있는 것처럼 인스턴스도 같은 원리이다. 거꾸로 하나의 EBS를 여러 EC2에 장착(EBS Multi Attach)이 가능하기도 하다. 여러 컴퓨터가 있으면 하나의 하드를 공용 저장소로 사용하는 원리이다. 이것은 당연히 물리적인 컴퓨터에서는 불가능하지만, 네트워크(클라우드)에서만 가능한 특징이다.

**EBS는 EC2와 같은 가용영역(AZ)에 존재**한다. AZ가 같아야 연길 및 통신이 빠르기 때문이다. 만일 다른 AZ로 생성해서 EC2에 붙이려고 한다면 에러가 나게 된다.
<br></br>
### ✅ **EBS와 Instance Storage**

EC2 인스턴스의 저장 타입은 2가지이다. 앞서 다룬 **EBS 기반**과 **인스턴스 저장 기반**이다.

- **[EBS 기반]**
    - EC2가 EBS와 네트워크로 연결
    - 따라서 **속도가 느림**
    - 대신 인스턴스가 삭제되어도 EBS는 남아있다. (영구적 스토리지)
    - 하나의 인스턴스에 연결한 EBS 볼륨을 따로 분리하여 다른 인스턴드에 연결 가능하다.
<br></br>
- **[인스턴스 저장 기반 (Instance Storage)]**
    - EC2 안에 storage가 들어있다.
    - 네트워크 연결 X
    - 인스턴스 삭제시 storage도 같이 삭제된다.
    - EBS처럼 스토어를 분리하여 다른 인스턴스에 연결 불가능하다.
    - 보통 영구적이지 않은 데이터를 저장한다. (캐시 데이터)

<br></br>
EC2를 생성시에 EC2 타입을 고르는 항목에서 인스턴스 스토리지 항목에 **EBS 전용**과 **1 x 100(SSD)** 라고 써져있는 유형들이 존재한다. EBS 전용은 말 그대로 EBS로만 사용할 수 있는 EC2 인스턴스 타입이라는 뜻이며, (SSD)라고 명시되어 있는 것이 인스턴스 스토리지를 따로 보유하고 있는 것이다.
<br></br><br></br>
## 🔍 EBS 볼륨(Volume) 이란?


EBS로 생성한 디스크 하나하나의 저장 단위를 의미한다. EBS 볼륨을 인스턴스에 연결한다는 말은 EC2에 물리적 하드 드라이브처럼 사용하겠다는 뜻이다. 다시 말해, 우리 컴퓨터의 C 드라이브, D 드라이브는 각각 디스크이며 볼륨이다.
<br></br>
### ✅ **EBS 볼륨 유형 타입**

EBS에도 용량에 따라 성능과 가격이 차이나느데, 다음과 같이 5가지의 타입으로 구분되어 있다.

1. **범용(General Purpose of GP3)** : SSD
2. **프로비저닝 된 IOPS(Provisioned IOPS or io2)** : SSD
3. 쓰루풋 최적화(Throughput Optimized HDD or st1)
4. 콜드 HDD(SC1)
5. **마그네틱(Standard)**
<br></br>
**각 하드의 성능은 용량과 MAX IOPS 수치**를 보면 된다. IOPS 수치가 높을수록 데이터 통신이 빠르다. 따라서, 프로비전된 IOPS이 가장 빠르고 좋으며, 일반적으로는 범용타입인 GP3을 선택한다. 만약 요금을 아끼겠다 하면 마그네틱을 사용하면 된다.
<br></br><br></br>
## 📚 참고

[[AWS] 📚 EC2 개념 원리 & 사용 세팅 💯 총정리 (Instance / EBS / AMI)](https://inpa.tistory.com/entry/AWS-%F0%9F%93%9A-EC2-%EA%B0%9C%EB%85%90-%EC%82%AC%EC%9A%A9-%EA%B5%AC%EC%B6%95-%EC%84%B8%ED%8C%85-%F0%9F%92%AF-%EC%A0%95%EB%A6%AC-%EC%9D%B8%EC%8A%A4%ED%84%B4%EC%8A%A4-EBS-AMI)

[[AWS] 📚 EC2 개념 원리 & 사용 세팅 💯 총정리 (Instance / EBS / AMI)](https://inpa.tistory.com/entry/AWS-%F0%9F%93%9A-EC2-%EA%B0%9C%EB%85%90-%EC%82%AC%EC%9A%A9-%EA%B5%AC%EC%B6%95-%EC%84%B8%ED%8C%85-%F0%9F%92%AF-%EC%A0%95%EB%A6%AC-%EC%9D%B8%EC%8A%A4%ED%84%B4%EC%8A%A4-EBS-AMI)