## 🔍 알림 기능 구현

웹 사용의 편의성을 위해 알림 기능을 넣기로 결정하였고, 로그인 상태일 때 웹 내에서 알림을 확인할 수 있도록 구현하였다. 보통 알림이라 함은 댓글이나 좋아요 알림과 같이 실시간 통신으로 이루어진다. 이는 유저의 요청 없이도 실시간으로 서버의 변경 사항을 웹 브라우저에 갱신해줘야 하는 서비스이다. 하지만 전통적인 Client-Server 모델의 HTTP 통신에서는 이런 기능을 구현하기가 어렵다. 클라이언트의 요청이 있어야만 서버가 응답을 할 수 있기 때문이다. HTTP 기반으로 해당 문제를 해결하려면 다음과 같은 방식들이 있다.

1. **Polling**
2. **Long-Polling**
3. **SSE (Server-Sent Event)**
4. **Web Socket**
<br></br>
### 1. Polling

![Image](https://github.com/user-attachments/assets/e0ce12cd-da0e-4d00-8a7d-8963fff623ec)

출처 : https://velog.io/@mocaccino/Polling과-Long-Polling이란-무엇인가-Spring-Boot-구현-간단-예제

일정 주기를 가지고 서버의 API를 호출하는 방법이다. 예를 들어, 클라이언트에서 5초마다 한 번씩 알림 목록을 호출한다면, 업데이트 내역이 5초마다 갱신되며 변경 사항을 적용할 수 있다. 이 방식은 기본적인 HTTP 통신을 기반으로 하기 때문에 호환성이 좋다는 장점이 있다.

하지만 해당 방식은 업데이트 주기가 길다면 실시간으로 데이터가 갱신 되지 않고, 또 짧다면 갱신 사항이 없음에도 서버에 요청이 들어와 불필요한 서버 부하가 발생한다는 것이다.
<br></br>
### 2. Long-Polling

Polling과 비슷하나, 업데이트 발생시에만 응답을 보내는 방식이다. 서버로 요청이 들어올 경우, 일정 시간동안 대기하였다가 요청한 데이터가 업데이트 되면 웹 브라우저에게 응답을 보낸다. Polling에서 불필요한 응답을 주는 경우를 줄이기 위해 사용할 수 있는 방법이다. 따라서 연결이 된 경우엔 실시간으로 데이터가 들어올 수 있다는 장점이 있다.

하지만 이 방식 또한 데이터 업데이트가 빈번하게 일어난다면 연결을 위한 요청도 똑같이 발생하므로, Polling과 유사하게 서버에 부하가 일어날 수 있다.

정리를 다시한번 해보자면,

1. 클라이언트가 서버에 요청

2. 서버는 클라이언트가 사용할 수 있는 데이터가 있다면 응답

3. 근데 만약 클라이언트가 사용할 만한 데이터가 없다면? 서버는 바로 응답하는 대신 보류하고 기다린다.

4. 그렇게 사용할만한 데이터가 생기면 서버는 클라이언트로 응답

이때 Long Polling에는 제한 시간이 존재하며, 보류하는 시간이 제한 시간을 초과하게 되면

연결이 끊어지며, 클라이언트는 다시 요청을 해야 한다.

바로 응답을 하지 않는다는 특징 때문에 **Hanging GET**이라고도 불린다.
<br></br>
### **3. SSE (Server-Sent Event)**

웹 브라우저에서 서버쪽으로 특정 이벤트를 구독하면, 서버에서는 해당 이벤트 발생시 웹브라우저 쪽으로 이벤트를 보내주는 방식이다. 따라서 한 번만 연결 요청을 보내면, 연결이 종료될 때까지 재연결 과정 없이 서버에서 웹 브라우저로 데이터를 계속해서 보낼 수 있다.

다만, 서버에서 웹 브라우저로만 데이터 전송이 가능하고, 그 반대는 불가능하다는 단점이 있다. 또, 최대 동시 접속 횟수가 제한되어 있다.
<br></br>
### **4. Web Socket**

서버와 웹브라우저 사이 양방향 통신이 가능한 방법이다. 변경 사항에 빠르게 반응해야하는 채팅이나, 리소스 상태에 대한 지속적 업데이트가 필요한 문서 동시 편집과 같은 서비스에 많이 사용되는 방식이다.

이 방식은 양방향 통신이 지속적으로 이루어질 수는 있으나, 연결을 유지하는 것 자체가 비용이 들기 때문에 트래픽 양이 많아진다면 서버에 큰 부담이 된다는 단점이 있다.

우리의 서비스는 "스터디 관리 플랫폼"이고, 알림은 다음과 같은 특징을 가집니다:

- **중요성**: 일정, 과제, 공지 등은 사용자에게 반드시 전달돼야 함
- **빈도**: 알림은 하루에 몇 건 정도로 빈도는 높지 않음
- **정확성**: 사용자가 꼭 알아야 하는 정보를 정해진 시간(예: 오전 9시)에 전달해야 함
- **대상**: 로그인한 사용자뿐만 아니라 **당일에 들어오지 않은 사용자도 포함**

서비스 특성상, **중요성은 높지만, 실시간 반응성은 덜 중요하며, 사용자는 앱/웹을 자주 들어오지 않을 수 있기에** 구현이 간단한 Polling 방식을 택하였다. 결론적으로, Polling + Notification DB 저장 + 사용자 조회를 구현하고자 한다.